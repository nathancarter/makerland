{"name":"death","__authors":["admin"],"duration":0.5,"description":"Shows a dark red and black burst that shrinks to nothing, as an indicator that some creature died.  Takes a parameter called \"position\" that is where the player/creature died.","code":"// store position of dying thing, since it will go away\nif ( !memory.hasOwnProperty( 'position' ) ) {\n    memory.position = XY(position);\n}\nvar x = memory.position.x;\nvar y = memory.position.y;\n// draw random, shrinking polygon\nvar numPoints = 10;\nvar maxRadius = 0.75 * CELL * (1-t);\nbeginPath();\nmoveTo( x, y );\nfor ( var i = 0 ; i <= numPoints * 2 ; i++ ) {\n    var rad = Math.random()*maxRadius*(i%2+1)/2;\n    var dirx = Math.cos( i*Math.PI/(numPoints*2) )*rad;\n    var diry = -Math.sin( i*Math.PI/(numPoints*2) )*rad;\n    lineTo( x+dirx, y+diry );\n}\nlineTo( x, y );\n// fill path with a random dark red color\nvar color = ''+((Math.random()*5)|0);\nfillStyle = '#' + color + color + '0000';\nfill();"}