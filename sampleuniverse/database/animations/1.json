{"name":"show text","__authors":["admin"],"duration":0,"code":"// only show the text to the player whose name is in the player parameter\nif ( currentStatus.name != player ) return;\n// set constants for sizes and styles\nvar fontSizeInPixels = 15;\nvar lineHeight = fontSizeInPixels*1.5;\nvar margin = 10;\nvar arrow = 10;\n// do computations based on those sizes and styles\n// break text into lines where the user put \"\\n\" as a line break code\nfont = fontSizeInPixels+'px Arial';\nvar lines = text.split( '\\\\n' );\nvar width = 0;\nfor ( var i = 0 ; i < lines.length ; i++ )\n    width = Math.max( width, measureText( lines[i] ).width );\nvar x = X(location);\nvar y = Y(location);\nvar left = x + arrow + margin;\nvar top = y - ( lines.length * lineHeight ) / 2;\nvar bottom = y + ( lines.length * lineHeight ) / 2;\n// draw shape in which text will sit, a box pointing to the location\nbeginPath();\nmoveTo( x, y );\nlineTo( x+arrow, y+arrow );\nlineTo( x+arrow, bottom );\nlineTo( x+arrow+2*margin+width, bottom );\nlineTo( x+arrow+2*margin+width, top );\nlineTo( x+arrow, top );\nlineTo( x+arrow, y-arrow );\nlineTo( x, y );\nfillStyle = '#ddccbb';\nfill();\nstrokeStyle = '#221100';\nstroke();\n// write each line of text separately\nfillStyle = '#221100';\nfor ( var i = 0 ; i < lines.length ; i++ )\n    fillText( lines[i], left, top + i*lineHeight + 1.1*fontSizeInPixels );","description":"Takes three parameters: text (a string), player (string name), and location (a [plane,x,y] triple that\\'s a map location).  It shows the given text to only the given player\\'s eyes, placing the text near the given map location.  It does not expire, so you must call stopAnimation() to cancel it."}