{"name":"Teleports a player","__authors":["admin"],"targets":["landscape item"],"code":"// format destination parameter as a triple of 3 floats, if possible\nif ( !destination ) return;\nvar triple = destination.split( ',' );\nif ( triple.length != 3 ) return;\nfor ( var i = 0 ; i < 3 ; i++ ) triple[i] = parseFloat( triple[i].trim() );\n\n// when the player enters, if they didn't just teleport here, teleport them away, while marking them as having just teleported:\nthis.on( 'entered', function ( player ) {\n    if ( !player.justTeleported ) {\n      \tplayer.justTeleported = true;\n        showAnimation( this.position, 'teleport out', { center : this.position } );\n        player.teleport( triple );\n        showAnimation( triple, 'teleport in', { center : triple } );\n        // but in case this teleportation destination was not another teleporter, clear the status after 1 second:\n        setTimeout( function () { player.justTeleported = false; }, 1000 );\n        // play associated sounds\n        playSound( 'teleport', this.position );\n        playSound( 'teleport', triple );\n    }\n} );\n\n// when the player exits, mark them as having not just teleported, unless their exit was by teleportation!\nthis.on( 'exited', function ( player ) {\n    var newpos = player.getPosition();\n    if ( ''+newpos != ''+triple ) {\n        player.justTeleported = false;\n    }\n} );","description":"<p>Attach this behavior to a landscape item and then provide a parameter of the form plane,x,y (that is, a comma-separated list of integers, such as, 0,1,2) that is the destination point for the teleportation.  When a player steps on the landscape item, they will be immediately teleported to that destination.</p><p>This is useful when creating portals, caves, stairs, and other things that move a player to another location/plane.</p>","parameters":{"destination":"A comma-separated list of three integers, plane,x,y, such as 1,15,-6."}}